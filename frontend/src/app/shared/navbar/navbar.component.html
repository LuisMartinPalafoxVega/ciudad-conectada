<nav class="navbar">
  <div class="navbar-container">

    <!-- Marca -->
    <div class="navbar-brand" routerLink="/feed">
      <div class="brand-icon">ğŸ›ï¸</div>
      <span class="brand-name">Ciudad Conectada</span>
    </div>

    <!-- toggle movil -->
    <button class="mobile-menu-toggle" (click)="toggleMenu()">
      <span>â˜°</span>
    </button>

    <div class="navbar-menu" [class.active]="isMenuOpen">

      <!-- ğŸ”¹ LINKS VISIBLES SOLO SI ESTÃ LOGUEADO -->
      <div class="navbar-links" *ngIf="currentUser">

        <a routerLink="/feed" routerLinkActive="active" (click)="closeMenu()">
          ğŸ›ï¸ Inicio
        </a>

        <!-- âŒ OCULTO PARA ADMIN -->
        <a 
          routerLink="/mis-reportes" 
          routerLinkActive="active" 
          (click)="closeMenu()"
          *ngIf="!isAdmin()"
        >
          ğŸ“‹ Mis Reportes
        </a>

        <!-- âŒ OCULTO PARA ADMIN -->
        <a 
          routerLink="/nuevo-reporte" 
          routerLinkActive="active" 
          (click)="closeMenu()"
          *ngIf="!isAdmin()"
        >
          â• Nuevo Reporte
        </a>

        <a routerLink="/mapa-calor" routerLinkActive="active" (click)="closeMenu()">
          ğŸ—ºï¸ Mapa
        </a>

        <!-- âœ”ï¸ SOLO ADMIN -->
        <a routerLink="/admin" routerLinkActive="active" *ngIf="isAdmin()" (click)="closeMenu()">
          âš™ï¸ Panel Admin
        </a>

      </div>

      <!-- ğŸ”¹ BOTONES CUANDO NO HAY SESIÃ“N -->
      <div class="navbar-actions" *ngIf="!currentUser">
        <a routerLink="/login" class="btn-login" (click)="closeMenu()">
          Iniciar SesiÃ³n
        </a>
        <a routerLink="/register" class="btn-register" (click)="closeMenu()">
          Registrarse
        </a>
      </div>

      <!-- ğŸ”¹ INFORMACIÃ“N DEL USUARIO LOGUEADO -->
      <div class="navbar-user" *ngIf="currentUser">

        <div class="user-info">

          <!-- Avatar -->
          <div class="user-avatar" *ngIf="!currentUser.foto_url">
            {{ getInitials(currentUser.nombre) }}
          </div>

          <img 
            *ngIf="currentUser.foto_url" 
            [src]="currentUser.foto_url"
            class="user-avatar user-avatar-image"
            [alt]="currentUser.nombre"
          />

          <div class="user-details">
            <span class="user-name">{{ currentUser.nombre }}</span>
            <span class="user-role">
              {{ currentUser.rol === 'administrador' ? 'Administrador' : 'Usuario' }}
            </span>
          </div>

        </div>

        <!-- MenÃº del usuario -->
        <div class="user-menu">
          <a routerLink="/perfil" class="btn-perfil" (click)="closeMenu()">
            ğŸ‘¤ Mi Perfil
          </a>

          <button class="btn-logout" (click)="logout()">
            ğŸšª Cerrar SesiÃ³n
          </button>
        </div>

      </div>

    </div>
  </div>
</nav>
